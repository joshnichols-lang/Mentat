@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500;600;700&display=swap');

/* WebTUI CSS Framework - Terminal UI Primitives */
@import '@webtui/css';

/* Xterm.js Terminal Emulator Styles */
@import '@xterm/xterm/css/xterm.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========== MENTAT TERMINAL - RETRO TUI DARK MODE ========== */
.dark {
  /* Deep black background - hacker terminal aesthetic */
  --background: 210 20% 4%;        /* #0a0a0a - Deep black */
  --foreground: 180 100% 50%;      /* #00ffff - Cyan text */
  
  /* Surface levels - minimal distinction */
  --card: 210 20% 4%;              /* #0a0a0a - Same as background */
  --card-foreground: 180 100% 50%;  /* #00ffff - Cyan */
  --popover: 210 20% 4%;
  --popover-foreground: 180 100% 50%;
  
  /* Borders - bright cyan, single pixel */
  --border: 180 100% 50%;          /* #00ffff - Cyan borders */
  --input: 210 20% 4%;             /* #0a0a0a - Input background */
  
  /* Primary - Cyan accent (main interaction color) */
  --primary: 180 100% 50%;         /* #00ffff - Cyan */
  --primary-foreground: 210 20% 4%; /* Black text on cyan */
  
  /* Secondary - Yellow accent */
  --secondary: 60 100% 50%;        /* #ffff00 - Yellow */
  --secondary-foreground: 210 20% 4%;
  
  --muted: 180 100% 20%;
  --muted-foreground: 180 100% 35%; /* Dimmed cyan text */
  
  --accent: 60 100% 50%;           /* #ffff00 - Yellow accent */
  --accent-foreground: 210 20% 4%;
  
  /* Text hierarchy - cyan tones */
  --text-primary: 180 100% 50%;    /* #00ffff - Bright cyan */
  --text-secondary: 180 100% 35%;  /* Dimmed cyan */
  --text-tertiary: 180 100% 20%;   /* Very dim cyan */
  
  /* Trading status colors - retro palette */
  --success: 180 100% 50%;         /* #00ffff - Cyan (buy) */
  --success-foreground: 210 20% 4%;
  
  --destructive: 338 100% 50%;     /* #ff0055 - Retro red */
  --destructive-foreground: 0 0% 100%;
  
  --warning: 60 100% 50%;          /* #ffff00 - Yellow */
  --warning-foreground: 210 20% 4%;
  
  /* Chart colors - terminal palette */
  --chart-1: 180 100% 50%;         /* #00ffff - Cyan */
  --chart-2: 338 100% 50%;         /* #ff0055 - Red */
  --chart-3: 60 100% 50%;          /* #ffff00 - Yellow */
  --chart-4: 120 100% 50%;         /* #00ff00 - Green */
  --chart-5: 270 100% 50%;         /* #8800ff - Purple */
  
  /* Elevation - cyan glow effects */
  --elevate-1: rgba(0, 255, 255, 0.1);
  --elevate-2: rgba(0, 255, 255, 0.2);
  
  /* Typography - IBM Plex Mono ONLY */
  --font-sans: 'IBM Plex Mono', 'Consolas', 'Monaco', monospace;
  --font-serif: 'IBM Plex Mono', monospace;
  --font-mono: 'IBM Plex Mono', monospace;
  
  /* Border radius - ZERO (no rounded corners in TUI) */
  --radius: 0;
  
  /* Shadows - none (flat TUI aesthetic) */
  --shadow-sm: none;
  --shadow: none;
  --shadow-md: none;
  --shadow-lg: none;
  --shadow-xl: none;
  
  /* Ring for focus states - cyan */
  --ring: 180 100% 50%;
}

/* ========== MENTAT TERMINAL - LIGHT MODE (Industrial) ========== */
.light {
  /* Industrial grey background */
  --background: 0 0% 91%;          /* #e8e8e8 - Industrial grey */
  --foreground: 217 100% 35%;      /* #0055ff - Deep blue text */
  
  /* Surface levels */
  --card: 0 0% 91%;
  --card-foreground: 217 100% 35%;
  --popover: 0 0% 91%;
  --popover-foreground: 217 100% 35%;
  
  /* Borders - deep blue */
  --border: 217 100% 35%;          /* #0055ff - Deep blue borders */
  --input: 0 0% 91%;
  
  /* Primary - Deep blue */
  --primary: 217 100% 35%;         /* #0055ff - Deep blue */
  --primary-foreground: 0 0% 91%;
  
  /* Secondary - Dark grey */
  --secondary: 0 0% 10%;           /* #1a1a1a - Almost black */
  --secondary-foreground: 0 0% 91%;
  
  --muted: 217 100% 20%;
  --muted-foreground: 217 100% 50%;
  
  --accent: 0 0% 10%;              /* #1a1a1a - Dark accent */
  --accent-foreground: 0 0% 91%;
  
  /* Text hierarchy - blue tones */
  --text-primary: 217 100% 35%;    /* #0055ff - Deep blue */
  --text-secondary: 217 100% 50%;  /* Lighter blue */
  --text-tertiary: 217 100% 70%;   /* Very light blue */
  
  /* Trading status colors */
  --success: 217 100% 35%;         /* Blue */
  --success-foreground: 0 0% 91%;
  
  --destructive: 338 100% 50%;     /* Red */
  --destructive-foreground: 0 0% 100%;
  
  --warning: 45 100% 51%;          /* Yellow */
  --warning-foreground: 0 0% 10%;
  
  /* Chart colors */
  --chart-1: 217 100% 35%;
  --chart-2: 338 100% 50%;
  --chart-3: 60 100% 50%;
  --chart-4: 120 100% 35%;
  --chart-5: 270 100% 35%;
  
  /* Elevation */
  --elevate-1: rgba(0, 85, 255, 0.1);
  --elevate-2: rgba(0, 85, 255, 0.2);
  
  /* Typography - IBM Plex Mono everywhere */
  --font-sans: 'IBM Plex Mono', monospace;
  --font-serif: 'IBM Plex Mono', monospace;
  --font-mono: 'IBM Plex Mono', monospace;
  
  /* Border radius - ZERO */
  --radius: 0;
  
  /* Shadows - none */
  --shadow-sm: none;
  --shadow: none;
  --shadow-md: none;
  --shadow-lg: none;
  --shadow-xl: none;
  
  /* Ring for focus states */
  --ring: 217 100% 35%;
}

@layer base {
  * {
    @apply border-border;
  }
  
  body {
    @apply bg-background text-foreground;
    font-family: var(--font-sans);
    font-feature-settings: "rlig" 1, "calt" 1, "zero" 1;
    position: relative;
    overflow: hidden; /* No scrolling - TUI fills viewport */
  }
  
  /* CRT Scanline overlay effect */
  body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(
      0deg,
      rgba(0, 0, 0, 0.15) 0px,
      transparent 1px,
      transparent 2px,
      rgba(0, 0, 0, 0.15) 3px
    );
    pointer-events: none;
    z-index: 9999;
    animation: scanline 8s linear infinite;
  }
  
  /* Dot grid background pattern */
  body::after {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
      radial-gradient(circle, rgba(0, 255, 255, 0.05) 1px, transparent 1px);
    background-size: 20px 20px;
    pointer-events: none;
    z-index: 0;
  }
  
  @keyframes scanline {
    0% {
      background-position: 0 0;
    }
    100% {
      background-position: 0 100%;
    }
  }
  
  /* All content above background effects */
  #root {
    position: relative;
    z-index: 1;
  }
  
  /* Typography presets */
  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold tracking-tight;
  }
  
  /* Everything is monospace */
  .font-mono {
    font-family: var(--font-mono);
    font-feature-settings: "zero" 1, "ss01" 1;
  }
  
  /* Remove all rounded corners globally */
  * {
    border-radius: 0 !important;
  }
}

@layer utilities {
  /* ========== SUBTLE ANIMATION UTILITIES ========== */
  
  /* Hover elevation - subtle scale and highlight */
  .hover-elevate {
    @apply transition-all duration-200 ease-out;
    will-change: transform, background-color;
  }
  
  .hover-elevate:hover {
    @apply scale-[1.01];
    background-color: color-mix(in srgb, var(--elevate-1), transparent);
  }
  
  /* Active press - subtle scale down */
  .active-press {
    @apply transition-transform duration-150 ease-out;
  }
  
  .active-press:active {
    @apply scale-[0.98];
  }
  
  /* Smooth fade in */
  .fade-in {
    animation: fadeIn 200ms ease-out;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  /* Smooth slide up */
  .slide-up {
    animation: slideUp 250ms ease-out;
  }
  
  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* Shimmer loading effect */
  .shimmer {
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.03) 50%,
      transparent 100%
    );
    background-size: 200% 100%;
    animation: shimmer 2s infinite;
  }
  
  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }
  
  /* Pulse highlight for data updates */
  .pulse-highlight {
    animation: pulseHighlight 300ms ease-out;
  }
  
  @keyframes pulseHighlight {
    0% { background-color: transparent; }
    50% { background-color: var(--elevate-1); }
    100% { background-color: transparent; }
  }
  
  /* Smooth number transitions */
  .number-transition {
    @apply transition-all duration-300 ease-out;
  }
  
  /* ========== DATA VISUALIZATION UTILITIES ========== */
  
  /* Arc gauge stroke animation */
  .arc-animate {
    stroke-dasharray: 0 100;
    animation: arcDraw 800ms ease-out forwards;
  }
  
  @keyframes arcDraw {
    to {
      stroke-dasharray: var(--arc-value, 75) 100;
    }
  }
  
  /* Chart line drawing */
  .chart-draw {
    stroke-dasharray: 1000;
    stroke-dashoffset: 1000;
    animation: draw 1s ease-out forwards;
  }
  
  @keyframes draw {
    to {
      stroke-dashoffset: 0;
    }
  }
  
  /* Heatmap cell animation */
  .heatmap-cell {
    @apply transition-all duration-200 ease-out;
  }
  
  .heatmap-cell:hover {
    @apply scale-110 z-10;
  }
  
  /* ========== TEXT HIERARCHY UTILITIES ========== */
  
  .text-primary {
    color: hsl(var(--text-primary));
  }
  
  .text-secondary {
    color: hsl(var(--text-secondary));
  }
  
  .text-tertiary {
    color: hsl(var(--text-tertiary));
  }
  
  /* ========== TRADING-SPECIFIC UTILITIES ========== */
  
  /* Positive/Long */
  .text-long {
    color: hsl(var(--success));
  }
  
  .bg-long {
    background-color: hsl(var(--success));
  }
  
  /* Negative/Short */
  .text-short {
    color: hsl(var(--destructive));
  }
  
  .bg-short {
    background-color: hsl(var(--destructive));
  }
  
  /* Price flash animations */
  .price-up {
    animation: flashGreen 400ms ease-out;
  }
  
  @keyframes flashGreen {
    0% { background-color: transparent; }
    30% { background-color: hsla(var(--success), 0.15); }
    100% { background-color: transparent; }
  }
  
  .price-down {
    animation: flashRed 400ms ease-out;
  }
  
  @keyframes flashRed {
    0% { background-color: transparent; }
    30% { background-color: hsla(var(--destructive), 0.15); }
    100% { background-color: transparent; }
  }
  
  /* ========== GEOMETRIC PANEL STYLES ========== */
  
  /* Clean minimal panel */
  .panel-minimal {
    @apply bg-card rounded-lg border border-border/50 p-6;
  }
  
  /* Elevated panel with subtle shadow */
  .panel-elevated {
    @apply bg-card rounded-xl border border-border/30 p-8 shadow-sm;
  }
  
  /* Ghost panel - no background, spacing-based */
  .panel-ghost {
    @apply bg-transparent border-none p-6;
  }
  
  /* ========== SCROLLBAR STYLING ========== */
  
  /* Minimal scrollbars */
  .scrollbar-minimal::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  .scrollbar-minimal::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .scrollbar-minimal::-webkit-scrollbar-thumb {
    background: hsl(var(--border));
    border-radius: 3px;
  }
  
  .scrollbar-minimal::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--muted-foreground));
  }
  
  /* ========== GLASSMORPHISM REMOVAL ========== */
  /* All glassmorphic effects removed - pure geometric design */
  
  /* ========== NUMORA-STYLE UTILITIES ========== */
  
  /* Panel styling - Numora grid panels */
  .numora-panel {
    @apply bg-card border border-border rounded-lg p-4 hover:border-border/50 transition-all duration-200;
  }
  
  .numora-panel-compact {
    @apply bg-card border border-border rounded-lg p-3 hover:border-border/50 transition-all duration-200;
  }
  
  .numora-panel-elevated {
    @apply bg-secondary border border-border/70 rounded-lg p-6 hover:border-border/50 transition-all duration-200;
  }
  
  /* Time range pills (1D, 7D, 3M, etc.) */
  .time-pill {
    @apply px-3 py-1.5 text-sm rounded-md transition-all duration-150;
    @apply text-foreground/70 bg-secondary hover:bg-secondary/80;
  }
  
  .time-pill-active {
    @apply bg-foreground/10 text-foreground font-medium;
  }
  
  /* Metric labels - uppercase small text */
  .metric-label {
    @apply text-xs uppercase tracking-wide text-foreground/60;
  }
  
  /* Large display numbers - monospace */
  .display-number-lg {
    @apply font-mono text-3xl font-semibold;
  }
  
  .display-number-xl {
    @apply font-mono text-5xl font-semibold tracking-tight;
  }
  
  /* Percentage badges */
  .percentage-badge {
    @apply inline-flex items-center px-2 py-1 rounded text-xs font-medium;
  }
  
  .percentage-badge-positive {
    @apply bg-success/10 text-success border border-success/20;
  }
  
  .percentage-badge-negative {
    @apply bg-destructive/10 text-destructive border border-destructive/20;
  }
  
  /* Token badges (USDT 35%, ETH 32%, etc.) */
  .token-badge {
    @apply inline-flex items-center gap-1.5 px-2 py-1 rounded bg-foreground/10 text-xs font-medium;
  }
  
  /* ========== FOCUS STATES ========== */
  
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 focus-visible:ring-offset-background;
  }
  
  /* ========== WEBTUI TERMINAL UTILITIES ========== */
  
  /* Box shearing effect - authentic terminal distortion */
  .tui-box-shear {
    transform: skewX(-2deg);
    box-shadow: 2px 0 0 0 rgba(0, 255, 255, 0.1);
  }
  
  .tui-box-shear-content {
    transform: skewX(2deg); /* Counter-skew content for readability */
  }
  
  /* Terminal box with ASCII borders */
  .tui-box {
    @apply border border-border font-mono;
    position: relative;
  }
  
  /* Terminal box with corner accents */
  .tui-box-corner::before,
  .tui-box-corner::after {
    content: "┌";
    position: absolute;
    color: hsl(var(--primary));
    font-size: 1rem;
    line-height: 1;
  }
  
  .tui-box-corner::before {
    top: -1px;
    left: -1px;
  }
  
  .tui-box-corner::after {
    content: "┐";
    top: -1px;
    right: -1px;
  }
  
  /* Terminal button styles - blocky, monospace */
  .tui-button {
    @apply font-mono border border-border px-4 py-2 transition-all duration-100;
    background: transparent;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
  
  .tui-button:hover {
    @apply bg-primary/10;
    box-shadow: 0 0 10px rgba(0, 255, 255, 0.2);
  }
  
  .tui-button:active {
    @apply bg-primary/20;
    transform: translateY(1px);
  }
  
  /* Terminal input styles - CLI-style */
  .tui-input {
    @apply font-mono border border-border bg-transparent px-3 py-2;
    caret-color: hsl(var(--primary));
  }
  
  .tui-input:focus {
    @apply outline-none ring-1 ring-primary;
    box-shadow: 0 0 10px rgba(0, 255, 255, 0.15);
  }
  
  /* ASCII table styles */
  .tui-table {
    @apply font-mono text-sm;
    border-collapse: separate;
    border-spacing: 0;
  }
  
  .tui-table th,
  .tui-table td {
    @apply border-b border-border px-3 py-2;
  }
  
  .tui-table th {
    @apply text-primary uppercase text-xs tracking-wider;
  }
  
  /* Terminal text effects */
  .tui-text-glow {
    text-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
  }
  
  .tui-text-blink {
    animation: blink 1s step-end infinite;
  }
  
  @keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }
  
  /* Box-drawing character utilities */
  .tui-border-h::before {
    content: "─";
  }
  
  .tui-border-v::before {
    content: "│";
  }
  
  .tui-corner-tl::before {
    content: "┌";
  }
  
  .tui-corner-tr::before {
    content: "┐";
  }
  
  .tui-corner-bl::before {
    content: "└";
  }
  
  .tui-corner-br::before {
    content: "┘";
  }
}

/* ========== SPECIFIC COMPONENT OVERRIDES ========== */

/* Remove excessive button rounding */
button {
  border-radius: var(--radius);
}

/* Ensure inputs have minimal styling */
input[type="text"],
input[type="number"],
input[type="email"],
input[type="password"],
textarea {
  @apply bg-input border border-border/50 rounded-md px-4 py-3 text-foreground placeholder:text-muted-foreground focus-ring transition-all duration-200;
}

/* Clean table styling */
table {
  @apply w-full;
}

th {
  @apply text-xs font-medium uppercase tracking-wide text-tertiary pb-3;
}

td {
  @apply py-3 text-sm;
}

tr {
  @apply border-b border-border/30 hover-elevate;
}

/* Minimal badge styling */
.badge {
  @apply inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-md;
}

/* Print styles - ensure readability */
@media print {
  * {
    @apply text-black bg-white;
  }
}

/* ========== LEVERAGE SLIDER - HORIZONTAL ONLY ========== */
.leverage-slider-wrapper {
  position: relative;
  width: 100%;
  height: 40px;
  padding: 8px 0;
  display: block; /* Ensure block layout, not flex */
}

.leverage-slider-wrapper .ruler {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  pointer-events: none;
}

.leverage-slider-wrapper .ruler-mark {
  position: absolute;
  width: 1px;
  height: 4px;
  background: hsl(var(--muted-foreground) / 0.3);
  transform: translateX(-50%);
}

.leverage-slider-wrapper .ruler-mark-major {
  height: 8px;
  background: hsl(var(--muted-foreground) / 0.5);
}

.leverage-slider-wrapper .ruler-label {
  position: absolute;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 10px;
  color: hsl(var(--text-tertiary));
  white-space: nowrap;
  font-family: var(--font-mono);
}

.leverage-slider-wrapper .track-glow,
.leverage-slider-wrapper .track-fill {
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  height: 4px;
  border-radius: 2px;
  pointer-events: none;
}

.leverage-slider-wrapper .track-glow {
  width: var(--lev-percentage);
  background: var(--lev-color);
  opacity: 0.3;
  filter: blur(4px);
}

.leverage-slider-wrapper .track-fill {
  width: var(--lev-percentage);
  background: var(--lev-color);
}

.leverage-slider-wrapper .leverage-input {
  position: absolute;
  top: 50%;
  left: 0;
  transform: translateY(-50%);
  width: 100%;
  height: 4px;
  -webkit-appearance: none;
  appearance: none;
  background: hsl(var(--border));
  border-radius: 2px;
  outline: none;
  cursor: pointer;
}

/* Horizontal slider thumb */
.leverage-slider-wrapper .leverage-input::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: var(--lev-color);
  cursor: pointer;
  border: 2px solid hsl(var(--background));
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.leverage-slider-wrapper .leverage-input::-moz-range-thumb {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: var(--lev-color);
  cursor: pointer;
  border: 2px solid hsl(var(--background));
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.leverage-slider-wrapper .leverage-value {
  position: absolute;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  font-family: var(--font-mono);
  font-size: 11px;
  font-weight: 600;
  color: var(--lev-color);
  padding-left: 8px;
}

/* Hide scrollbars while keeping scroll functionality */
.no-scrollbar {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}

.no-scrollbar::-webkit-scrollbar {
  display: none;  /* Chrome, Safari and Opera */
}
